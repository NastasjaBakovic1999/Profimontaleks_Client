<div class="ui-g ui-fluid">
    <div class="ui-g-12">
        <div class="card card-w-title minHeight">
            <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid">
                <div class="ui-grid-row">
                    <div class="ui-g-12 ui-md-12">
                        <p-table #dt [columns]="cols" [value]="workers" paginatorDropdownAppendTo="body"
                            [rowExpandMode]="'multiple'" dataKey="id" selectionMode="single" [autoLayout]="true" 
                            [loading]="loading" (onRowSelect)="onRowSelect($event)" columnResizeMode="expand" 
                            [lazy]="true" (onLazyLoad)="initServices()">
                            <ng-template pTemplate="caption">
                                <div class="ui-grid-row">
                                    <div class="ui-grid-col-8">WORKERS</div>
                                    <div class="ui-grid-col-4">
                                        <button pButton pRipple type="button" label="Add Worker" class="p-button-danger"
                                            icon="pi pi-fw pi-plus" iconPos="left" (click)="addNew()"></button>
                                    </div>
                                </div>
                            </ng-template>
                            <ng-template pTemplate="header" let-columns>
                                <tr>
                                    <th *ngFor="let col of columns" [pSortableColumn]="col.field" pReorderableColumn
                                        pResizableColumn>
                                        {{col.header}}
                                    </th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-expanded="expanded" let-rowData let-columns="columns">
                                <tr [pSelectableRow]="rowData">
                                    <td *ngFor="let col of columns" class="ui-resizable-column" [ngSwitch]="col.field">
                                        <span *ngSwitchDefault> {{transform(rowData[col.field], col.format, col.pipeType)}} </span>
                                        <span *ngSwitchCase="'status'"> {{rowData.status.description}} </span>
                                        <span *ngSwitchCase="'position'"> {{rowData.position.description}} </span>
                                    </td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>